{"ast":null,"code":"//const base_url = 'http://localhost:8001';\nconst base_url = \"http://api.web-around.mooo.com\";\nexport const register = (email, password) => {\n  console.log('register auth:', {\n    email,\n    password\n  });\n  return fetch(`${base_url}/signup`, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  }).then(res => {\n    if (res.ok) {\n      return res.json();\n    } else {\n      return Promise.reject(res.status);\n    }\n  }).catch(error => {\n    console.log(`Error: ${error}`);\n  });\n};\nexport const authorize = (email, password) => {\n  return fetch(`${base_url}/signin`, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email,\n      password\n    })\n  }).then(res => res.json()).then(data => {\n    if (data.token) {\n      localStorage.setItem('token', data.token);\n      console.log('token autorize', data.token);\n      return data;\n    } else {\n      return;\n    }\n  }).catch(err => {\n    return console.log(`Error: ${err}`);\n  });\n};\nexport const getToken = token => {\n  return fetch(`${base_url}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`\n    }\n  }).then(res => res.json()).then(data => {\n    console.log(\"auth Token\", data);\n    return data;\n  }).catch(err => {\n    return console.log(`Error: ${err}`);\n  });\n};","map":{"version":3,"names":["base_url","register","email","password","console","log","fetch","method","headers","Accept","body","JSON","stringify","then","res","ok","json","Promise","reject","status","catch","error","authorize","data","token","localStorage","setItem","err","getToken","Authorization"],"sources":["C:/Users/DrDendrite/dev/web_project_api_full/frontend/src/utils/auth.js"],"sourcesContent":["//const base_url = 'http://localhost:8001';\nconst base_url =\"http://api.web-around.mooo.com\";\nexport const register = (email, password) => {\n  console.log('register auth:', { email, password });\n  return fetch(`${base_url}/signup`, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email,\n      password\n    }),\n  })\n    .then((res) => {\n      if (res.ok) {\n        return res.json();\n      }else {\n      return Promise.reject(res.status);}\n    })\n    .catch((error) => {\n      console.log(`Error: ${error}`);\n    });\n};\n\nexport const authorize = (email, password) => {\n  return fetch(`${base_url}/signin`, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n    },\n\n    body: JSON.stringify({ email, password }),\n  })\n    .then((res) => res.json())\n    .then((data) => {\n      if (data.token) {\n        localStorage.setItem('token', data.token);\n        console.log('token autorize', data.token)\n        return data;\n      } else {\n        return;\n      }\n    })\n\n    .catch((err) => {\n      return console.log(`Error: ${err}`);\n    });\n};\n\nexport const getToken = (token) => {\n  return fetch(`${base_url}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`,\n    },\n  })\n    .then((res) => res.json())\n    .then((data) => {\n      console.log(\"auth Token\", data)\n      return data;\n    })\n    .catch((err) => {\n      return console.log(`Error: ${err}`);\n    });\n};"],"mappings":"AAAA;AACA,MAAMA,QAAQ,GAAE,gCAAgC;AAChD,OAAO,MAAMC,QAAQ,GAAGA,CAACC,KAAK,EAAEC,QAAQ,KAAK;EAC3CC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAE;IAAEH,KAAK;IAAEC;EAAS,CAAC,CAAC;EAClD,OAAOG,KAAK,CAAE,GAAEN,QAAS,SAAQ,EAAE;IACjCO,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACPC,MAAM,EAAE,kBAAkB;MAC1B,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MACnBV,KAAK;MACLC;IACF,CAAC;EACH,CAAC,CAAC,CACCU,IAAI,CAAEC,GAAG,IAAK;IACb,IAAIA,GAAG,CAACC,EAAE,EAAE;MACV,OAAOD,GAAG,CAACE,IAAI,CAAC,CAAC;IACnB,CAAC,MAAK;MACN,OAAOC,OAAO,CAACC,MAAM,CAACJ,GAAG,CAACK,MAAM,CAAC;IAAC;EACpC,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,IAAK;IAChBjB,OAAO,CAACC,GAAG,CAAE,UAASgB,KAAM,EAAC,CAAC;EAChC,CAAC,CAAC;AACN,CAAC;AAED,OAAO,MAAMC,SAAS,GAAGA,CAACpB,KAAK,EAAEC,QAAQ,KAAK;EAC5C,OAAOG,KAAK,CAAE,GAAEN,QAAS,SAAQ,EAAE;IACjCO,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACPC,MAAM,EAAE,kBAAkB;MAC1B,cAAc,EAAE;IAClB,CAAC;IAEDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAEV,KAAK;MAAEC;IAAS,CAAC;EAC1C,CAAC,CAAC,CACCU,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACE,IAAI,CAAC,CAAC,CAAC,CACzBH,IAAI,CAAEU,IAAI,IAAK;IACd,IAAIA,IAAI,CAACC,KAAK,EAAE;MACdC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEH,IAAI,CAACC,KAAK,CAAC;MACzCpB,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEkB,IAAI,CAACC,KAAK,CAAC;MACzC,OAAOD,IAAI;IACb,CAAC,MAAM;MACL;IACF;EACF,CAAC,CAAC,CAEDH,KAAK,CAAEO,GAAG,IAAK;IACd,OAAOvB,OAAO,CAACC,GAAG,CAAE,UAASsB,GAAI,EAAC,CAAC;EACrC,CAAC,CAAC;AACN,CAAC;AAED,OAAO,MAAMC,QAAQ,GAAIJ,KAAK,IAAK;EACjC,OAAOlB,KAAK,CAAE,GAAEN,QAAS,WAAU,EAAE;IACnCO,MAAM,EAAE,KAAK;IACbC,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB;MAClCqB,aAAa,EAAG,UAASL,KAAM;IACjC;EACF,CAAC,CAAC,CACCX,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACE,IAAI,CAAC,CAAC,CAAC,CACzBH,IAAI,CAAEU,IAAI,IAAK;IACdnB,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEkB,IAAI,CAAC;IAC/B,OAAOA,IAAI;EACb,CAAC,CAAC,CACDH,KAAK,CAAEO,GAAG,IAAK;IACd,OAAOvB,OAAO,CAACC,GAAG,CAAE,UAASsB,GAAI,EAAC,CAAC;EACrC,CAAC,CAAC;AACN,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}