{"ast":null,"code":"const BASE_URL = \"http://localhost:3000\";\n// const BASE_URL = \"http://localhost:3000\";\n\nclass Api {\n  constructor({\n    address\n  }) {\n    this._address = address;\n    this._token = localStorage.getItem(\"token\");\n  }\n  async _useFetch(url, method, body) {\n    const res = await fetch(url, {\n      headers: {\n        Authorization: \"Bearer \" + this._token,\n        \"Content-Type\": \"application/json\"\n      },\n      method,\n      body: JSON.stringify(body)\n    });\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Error ${res.status}`);\n  }\n  async getUserInfoFromServer() {\n    try {\n      const res = await this._useFetch(this._address + \"/users/me\", \"GET\");\n      return res;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  async getCards() {\n    try {\n      const res = await this._useFetch(this._address + \"/cards\", \"GET\");\n      return res;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  async saveDataToServer(name, about) {\n    try {\n      const res = await this._useFetch(this._address + \"/users/me\", \"PATCH\", {\n        name,\n        about\n      });\n      return res;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  async addNewCardToServer(name, link) {\n    try {\n      const res = await this._useFetch(this._address + \"/cards\", \"POST\", {\n        name: name,\n        link: link\n      });\n      return res;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  async deleteCardFromServer(cardId) {\n    try {\n      const res = await this._useFetch(`${this._address}/cards/${cardId}`, \"DELETE\");\n      return res;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  async addLikeFromCard(cardId) {\n    try {\n      const res = await this._useFetch(`${this._address}/cards/${cardId}/likes`, \"PUT\");\n      return res;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  async deleteLikeFromCard(cardId) {\n    try {\n      const res = await this._useFetch(`${this._address}/cards/${cardId}/likes`, \"DELETE\");\n      return res;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n  async updateAvatar(avatarUrl) {\n    try {\n      if (typeof avatarUrl === \"string\" && /^https?:\\/\\/\\S+$/.test(avatarUrl)) {\n        const res = await this._useFetch(this._address + \"/users/me/avatar\", \"PATCH\", {\n          avatar: avatarUrl\n        });\n        return res;\n      } else {\n        throw new Error(\"La URL del avatar no es válida\");\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  }\n}\nconst api = new Api({\n  address: BASE_URL\n});\nexport default api;","map":{"version":3,"names":["BASE_URL","Api","constructor","address","_address","_token","localStorage","getItem","_useFetch","url","method","body","res","fetch","headers","Authorization","JSON","stringify","ok","json","Promise","reject","status","getUserInfoFromServer","err","console","log","getCards","saveDataToServer","name","about","addNewCardToServer","link","deleteCardFromServer","cardId","addLikeFromCard","deleteLikeFromCard","updateAvatar","avatarUrl","test","avatar","Error","api"],"sources":["C:/Users/DrDendrite/dev/web_project_api_full/frontend/src/utils/api.js"],"sourcesContent":["const BASE_URL = \"http://localhost:3000\";\n// const BASE_URL = \"http://localhost:3000\";\n\nclass Api {\n  constructor({ address }) {\n    this._address = address;\n    this._token = localStorage.getItem(\"token\");\n  }\n\n  async _useFetch(url, method, body) {\n    const res = await fetch(url, {\n      headers: {\n        Authorization: \"Bearer \" + this._token,\n        \"Content-Type\": \"application/json\",\n      },\n      method,\n      body: JSON.stringify(body),\n    });\n\n    if (res.ok) {\n      return res.json();\n    }\n\n    return Promise.reject(`Error ${res.status}`);\n  }\n\n  async getUserInfoFromServer() {\n    try {\n      const res = await this._useFetch(this._address + \"/users/me\", \"GET\");\n\n      return res;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  async getCards() {\n    try {\n      const res = await this._useFetch(this._address + \"/cards\", \"GET\");\n      return res;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  async saveDataToServer(name, about) {\n    try {\n      const res = await this._useFetch(this._address + \"/users/me\", \"PATCH\", {\n        name,\n        about,\n      });\n\n      return res;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  async addNewCardToServer(name, link) {\n    try {\n      const res = await this._useFetch(this._address + \"/cards\", \"POST\", {\n        name: name,\n        link: link,\n      });\n\n      return res;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  async deleteCardFromServer(cardId) {\n    try {\n      const res = await this._useFetch(\n        `${this._address}/cards/${cardId}`,\n        \"DELETE\"\n      );\n\n      return res;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  async addLikeFromCard(cardId) {\n    try {\n      const res = await this._useFetch(\n        `${this._address}/cards/${cardId}/likes`,\n        \"PUT\"\n      );\n\n      return res;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  async deleteLikeFromCard(cardId) {\n    try {\n      const res = await this._useFetch(\n        `${this._address}/cards/${cardId}/likes`,\n        \"DELETE\"\n      );\n\n      return res;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  async updateAvatar(avatarUrl) {\n    try {\n      if (typeof avatarUrl === \"string\" && /^https?:\\/\\/\\S+$/.test(avatarUrl)) {\n        const res = await this._useFetch(\n          this._address + \"/users/me/avatar\",\n          \"PATCH\",\n          {\n            avatar: avatarUrl,\n          }\n        );\n\n        return res;\n      } else {\n        throw new Error(\"La URL del avatar no es válida\");\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  }\n}\n\nconst api = new Api({\n  address: BASE_URL,\n});\n\nexport default api;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}