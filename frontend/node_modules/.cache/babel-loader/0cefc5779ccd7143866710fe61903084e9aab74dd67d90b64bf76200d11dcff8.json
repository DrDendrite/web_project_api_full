{"ast":null,"code":"import _defineProperty from\"C:/Users/DrDendrite/dev/web_project_api_full/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/DrDendrite/dev/web_project_api_full/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/DrDendrite/dev/web_project_api_full/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import Input from\"./Input\";import InfoTooltip from\"./InfoTooltip\";import{Link,useNavigate}from\"react-router-dom\";import*as auth from\"../utils/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Register(_ref){var title=_ref.title,nameBtn=_ref.nameBtn;var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),credentials=_useState2[0],setCredentials=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),open=_useState6[0],setOpen=_useState6[1];var navigate=useNavigate();var handleChange=function handleChange(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;setCredentials(_objectSpread(_objectSpread({},credentials),{},_defineProperty({},name,value)));};var handleCloseInfo=function handleCloseInfo(){setOpen(true);};var onRegister=function onRegister(evt){evt.preventDefault();auth.register(credentials.password,credentials.email).then(function(res){localStorage.setItem(\"token\",res.token);navigate(\"/signin\",{state:\"success\"});}).catch(function(err){console.error({message:\"Error creando el usuario\",detail:err.message});setError(true);setOpen(false);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"authenticate\",id:\"register\",onSubmit:onRegister,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"title\",children:title}),/*#__PURE__*/_jsxs(\"form\",{className:\"authenticate__form\",noValidate:true,children:[/*#__PURE__*/_jsx(Input,{className:\"authenticate__input\",type:\"email\",placeholder:\"Correo electrónico\",id:\"email\",onChange:handleChange}),/*#__PURE__*/_jsx(Input,{className:\"authenticate__input\",type:\"password\",placeholder:\"Contraseña\",id:\"password\",maxLength:\"200\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{className:\"authenticate__btn\",type:\"submit\",children:nameBtn})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"authenticate__register\",children:[\"\\xBFYa eres miembro? Inicia\",\" \",/*#__PURE__*/_jsx(Link,{to:\"/signin\",className:\"link\",children:\"sesi\\xF3n aqu\\xED\"})]})]}),/*#__PURE__*/_jsx(InfoTooltip,{error:error,onClose:handleCloseInfo,open:open})]});}export default Register;","map":{"version":3,"names":["React","useState","Input","InfoTooltip","Link","useNavigate","auth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Register","_ref","title","nameBtn","_useState","email","password","_useState2","_slicedToArray","credentials","setCredentials","_useState3","_useState4","error","setError","_useState5","_useState6","open","setOpen","navigate","handleChange","evt","_evt$target","target","name","value","_objectSpread","_defineProperty","handleCloseInfo","onRegister","preventDefault","register","then","res","localStorage","setItem","token","state","catch","err","console","message","detail","children","className","id","onSubmit","noValidate","type","placeholder","onChange","maxLength","to","onClose"],"sources":["C:/Users/DrDendrite/dev/web_project_api_full/frontend/src/components/Register.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport Input from \"./Input\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport * as auth from \"../utils/auth\";\n\nfunction Register({ title, nameBtn }) {\n  const [credentials, setCredentials] = useState({ email: \"\", password: \"\" });\n\n  const [error, setError] = useState(false);\n  const [open, setOpen] = useState(true);\n\n  const navigate = useNavigate();\n\n  const handleChange = (evt) => {\n    const { name, value } = evt.target;\n\n    setCredentials({\n      ...credentials,\n      [name]: value,\n    });\n  };\n\n  const handleCloseInfo = () => {\n    setOpen(true);\n  };\n\n  const onRegister = (evt) => {\n    evt.preventDefault();\n\n    auth\n      .register(credentials.password, credentials.email)\n      .then((res) => {\n        localStorage.setItem(\"token\", res.token);\n        navigate(\"/signin\", { state: \"success\" });\n      })\n      .catch((err) => {\n        console.error({\n          message: \"Error creando el usuario\",\n          detail: err.message,\n        });\n        setError(true);\n        setOpen(false);\n      });\n  };\n\n  return (\n    <>\n      <section className=\"authenticate\" id=\"register\" onSubmit={onRegister}>\n        <h3 className=\"title\">{title}</h3>\n        <form className=\"authenticate__form\" noValidate>\n          <Input\n            className={\"authenticate__input\"}\n            type={\"email\"}\n            placeholder={\"Correo electrónico\"}\n            id={\"email\"}\n            onChange={handleChange}\n          />\n          <Input\n            className={\"authenticate__input\"}\n            type={\"password\"}\n            placeholder={\"Contraseña\"}\n            id={\"password\"}\n            maxLength={\"200\"}\n            onChange={handleChange}\n          />\n          <button className=\"authenticate__btn\" type=\"submit\">\n            {nameBtn}\n          </button>\n        </form>\n        <p className=\"authenticate__register\">\n          ¿Ya eres miembro? Inicia{\" \"}\n          <Link to=\"/signin\" className=\"link\">\n            sesión aquí\n          </Link>\n        </p>\n      </section>\n      <InfoTooltip error={error} onClose={handleCloseInfo} open={open} />\n    </>\n  );\n}\n\nexport default Register;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}