{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DrDendrite\\\\dev\\\\web_project_api_full\\\\frontend\\\\src\\\\components\\\\EditAvatarPopup.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useRef, useState } from \"react\";\nimport PopupWithForm from \"./PopupWithForm.js\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction EditAvatarPopup({\n  isOpen,\n  onClose,\n  onUpdateAvatar\n}) {\n  _s();\n  var _currentUser$avatar;\n  const currentUser = useContext(CurrentUserContext);\n  const avatarRef = useRef((_currentUser$avatar = currentUser === null || currentUser === void 0 ? void 0 : currentUser.avatar) !== null && _currentUser$avatar !== void 0 ? _currentUser$avatar : \"\");\n  const [isButtonDisabled, setIsButtonDisabled] = useState(true);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  function isUrlValid(url) {\n    try {\n      new URL(url);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n  function handleSubmit(e) {\n    e.preventDefault();\n    const avatar = avatarRef.current.value;\n    if (isUrlValid(avatar)) {\n      onUpdateAvatar({\n        avatar: avatar\n      });\n    }\n  }\n  function handleInputChange() {\n    const avatar = avatarRef.current.value;\n    if (!isUrlValid(avatar)) {\n      setErrorMessage(\"Por favor ingresa una URL válida.\");\n    } else {\n      setErrorMessage(\"\");\n    }\n    setIsButtonDisabled(!isUrlValid(avatar));\n  }\n  return /*#__PURE__*/_jsxDEV(PopupWithForm, {\n    isOpen: isOpen,\n    name: \"avatar\",\n    title: \"Foto de perfil\",\n    onClose: onClose,\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"form-edit-photo\",\n      className: \"form\",\n      onSubmit: handleSubmit,\n      noValidate: true,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: \"form__user-box\",\n        id: \"edit-photo-avatar\",\n        type: \"url\",\n        placeholder: \"Url para imagen de perfil\",\n        name: \"link\",\n        ref: avatarRef,\n        required: true,\n        onChange: handleInputChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"edit-photo-avatar-error\",\n        children: errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"form__button-submit\",\n        disabled: isButtonDisabled,\n        children: \"Guardar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 5\n  }, this);\n}\n_s(EditAvatarPopup, \"lCtQwKC+5464nOAEqJCAKmTcc+M=\");\n_c = EditAvatarPopup;\nexport default EditAvatarPopup;\nvar _c;\n$RefreshReg$(_c, \"EditAvatarPopup\");","map":{"version":3,"names":["React","useContext","useRef","useState","PopupWithForm","CurrentUserContext","jsxDEV","_jsxDEV","EditAvatarPopup","isOpen","onClose","onUpdateAvatar","_s","_currentUser$avatar","currentUser","avatarRef","avatar","isButtonDisabled","setIsButtonDisabled","errorMessage","setErrorMessage","isUrlValid","url","URL","error","handleSubmit","e","preventDefault","current","value","handleInputChange","name","title","children","id","className","onSubmit","noValidate","type","placeholder","ref","required","onChange","fileName","_jsxFileName","lineNumber","columnNumber","disabled","_c","$RefreshReg$"],"sources":["C:/Users/DrDendrite/dev/web_project_api_full/frontend/src/components/EditAvatarPopup.js"],"sourcesContent":["import React, { useContext, useRef, useState } from \"react\";\nimport PopupWithForm from \"./PopupWithForm.js\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext.js\";\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\n  const currentUser = useContext(CurrentUserContext);\n  const avatarRef = useRef(currentUser?.avatar ?? \"\");\n  const [isButtonDisabled, setIsButtonDisabled] = useState(true);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n\n  function isUrlValid(url) {\n    try {\n      new URL(url);\n      return true;\n    } catch (error) {\n      return false;\n    }\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    const avatar = avatarRef.current.value;\n    if (isUrlValid(avatar)) {\n      onUpdateAvatar({ avatar:avatar });\n    }\n  }\n\n  function handleInputChange() {\n    const avatar = avatarRef.current.value;\n    if (!isUrlValid(avatar)) {\n      setErrorMessage(\"Por favor ingresa una URL válida.\");\n    } else {\n      setErrorMessage(\"\");\n    }\n    setIsButtonDisabled(!isUrlValid(avatar));\n  }\n\n  return (\n    <PopupWithForm\n      isOpen={isOpen}\n      name={\"avatar\"}\n      title={\"Foto de perfil\"}\n      onClose={onClose}\n    >\n      <form id=\"form-edit-photo\" className=\"form\" onSubmit={handleSubmit} noValidate>\n        <input\n          className=\"form__user-box\"\n          id=\"edit-photo-avatar\"\n          type=\"url\"\n          placeholder=\"Url para imagen de perfil\"\n          name=\"link\"\n          ref={avatarRef}\n          required\n          onChange={handleInputChange}\n        />\n        <span className=\"edit-photo-avatar-error\">{errorMessage}</span>\n        <button type=\"submit\" className=\"form__button-submit\" disabled={isButtonDisabled}>\n          Guardar\n        </button>\n      </form>\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC3D,OAAOC,aAAa,MAAM,oBAAoB;AAC9C,SAASC,kBAAkB,QAAQ,mCAAmC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvE,SAASC,eAAeA,CAAC;EAAEC,MAAM;EAAEC,OAAO;EAAEC;AAAe,CAAC,EAAE;EAAAC,EAAA;EAAA,IAAAC,mBAAA;EAC5D,MAAMC,WAAW,GAAGb,UAAU,CAACI,kBAAkB,CAAC;EAClD,MAAMU,SAAS,GAAGb,MAAM,EAAAW,mBAAA,GAACC,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEE,MAAM,cAAAH,mBAAA,cAAAA,mBAAA,GAAI,EAAE,CAAC;EACnD,MAAM,CAACI,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EAC9D,MAAM,CAACgB,YAAY,EAAEC,eAAe,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EAEpD,SAASkB,UAAUA,CAACC,GAAG,EAAE;IACvB,IAAI;MACF,IAAIC,GAAG,CAACD,GAAG,CAAC;MACZ,OAAO,IAAI;IACb,CAAC,CAAC,OAAOE,KAAK,EAAE;MACd,OAAO,KAAK;IACd;EACF;EAEA,SAASC,YAAYA,CAACC,CAAC,EAAE;IACvBA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,MAAMX,MAAM,GAAGD,SAAS,CAACa,OAAO,CAACC,KAAK;IACtC,IAAIR,UAAU,CAACL,MAAM,CAAC,EAAE;MACtBL,cAAc,CAAC;QAAEK,MAAM,EAACA;MAAO,CAAC,CAAC;IACnC;EACF;EAEA,SAASc,iBAAiBA,CAAA,EAAG;IAC3B,MAAMd,MAAM,GAAGD,SAAS,CAACa,OAAO,CAACC,KAAK;IACtC,IAAI,CAACR,UAAU,CAACL,MAAM,CAAC,EAAE;MACvBI,eAAe,CAAC,mCAAmC,CAAC;IACtD,CAAC,MAAM;MACLA,eAAe,CAAC,EAAE,CAAC;IACrB;IACAF,mBAAmB,CAAC,CAACG,UAAU,CAACL,MAAM,CAAC,CAAC;EAC1C;EAEA,oBACET,OAAA,CAACH,aAAa;IACZK,MAAM,EAAEA,MAAO;IACfsB,IAAI,EAAE,QAAS;IACfC,KAAK,EAAE,gBAAiB;IACxBtB,OAAO,EAAEA,OAAQ;IAAAuB,QAAA,eAEjB1B,OAAA;MAAM2B,EAAE,EAAC,iBAAiB;MAACC,SAAS,EAAC,MAAM;MAACC,QAAQ,EAAEX,YAAa;MAACY,UAAU;MAAAJ,QAAA,gBAC5E1B,OAAA;QACE4B,SAAS,EAAC,gBAAgB;QAC1BD,EAAE,EAAC,mBAAmB;QACtBI,IAAI,EAAC,KAAK;QACVC,WAAW,EAAC,2BAA2B;QACvCR,IAAI,EAAC,MAAM;QACXS,GAAG,EAAEzB,SAAU;QACf0B,QAAQ;QACRC,QAAQ,EAAEZ;MAAkB;QAAAa,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7B,CAAC,eACFvC,OAAA;QAAM4B,SAAS,EAAC,yBAAyB;QAAAF,QAAA,EAAEd;MAAY;QAAAwB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC,eAC/DvC,OAAA;QAAQ+B,IAAI,EAAC,QAAQ;QAACH,SAAS,EAAC,qBAAqB;QAACY,QAAQ,EAAE9B,gBAAiB;QAAAgB,QAAA,EAAC;MAElF;QAAAU,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACM,CAAC;AAEpB;AAAClC,EAAA,CA1DQJ,eAAe;AAAAwC,EAAA,GAAfxC,eAAe;AA4DxB,eAAeA,eAAe;AAAC,IAAAwC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}