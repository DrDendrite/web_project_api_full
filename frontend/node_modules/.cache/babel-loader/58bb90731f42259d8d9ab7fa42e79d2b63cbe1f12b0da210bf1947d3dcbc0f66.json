{"ast":null,"code":"class Api {\n  constructor({\n    baseUrl,\n    headers\n  }) {\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Error: ${res.status}`);\n  }\n  defaultProfile(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: this._getAuthHeaders()\n    }).then(this._checkResponse);\n  }\n  getCards(token) {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: this._getAuthHeaders()\n    }).then(this._checkResponse);\n  }\n  addCards(data) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: \"POST\",\n      headers: this._getAuthHeaders(),\n      body: JSON.stringify(data)\n    }).then(this._checkResponse);\n  }\n  updateAvatar(data) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._getAuthHeaders(),\n      body: JSON.stringify(data)\n    }).then(this._checkResponse);\n  }\n  updateProfile(data) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"PATCH\",\n      headers: this._getAuthHeaders(),\n      body: JSON.stringify(data)\n    }).then(this._checkResponse);\n  }\n  addLike(cardId) {\n    return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\n      method: \"PUT\",\n      headers: this._getAuthHeaders()\n    }).then(this._checkResponse);\n  }\n  deleteLike(cardId) {\n    return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\n      method: \"DELETE\",\n      headers: this._getAuthHeaders()\n    }).then(this._checkResponse);\n  }\n  deleteCard(cardId) {\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\n      method: \"DELETE\",\n      headers: this._getAuthHeaders()\n    }).then(this._checkResponse);\n  }\n  _getAuthHeaders() {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      return this._headers; // Return the headers without Authorization if no token is found\n    }\n    return {\n      ...this._headers,\n      'Authorization': `Bearer ${token}`\n    };\n  }\n}\nconst base_url = \"http://api.dendriteprojectaround.ignorelist.com\";\n//const base_url =\"http://localhost:8001\";\n\nexport const api = new Api({\n  baseUrl: base_url,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\nexport default api;","map":{"version":3,"names":["Api","constructor","baseUrl","headers","_baseUrl","_headers","_checkResponse","res","ok","json","Promise","reject","status","defaultProfile","token","fetch","_getAuthHeaders","then","getCards","addCards","data","method","body","JSON","stringify","updateAvatar","updateProfile","addLike","cardId","deleteLike","deleteCard","localStorage","getItem","base_url","api"],"sources":["C:/Users/DrDendrite/dev/web_project_api_full/frontend/src/utils/api.js"],"sourcesContent":["class Api {\n  constructor({ baseUrl, headers }) {\n    this._baseUrl = baseUrl;\n    this._headers = headers;\n  }\n\n  _checkResponse(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Error: ${res.status}`);\n  }\n\n  defaultProfile(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      headers: this._getAuthHeaders(),\n    }).then(this._checkResponse);\n  }\n\n  getCards(token) {\n    return fetch(`${this._baseUrl}/cards`, {\n      headers: this._getAuthHeaders(),\n    }).then(this._checkResponse);\n  }\n\n  addCards(data) {\n    return fetch(`${this._baseUrl}/cards`, {\n      method: \"POST\",\n      headers: this._getAuthHeaders(),\n      body: JSON.stringify(data),\n    }).then(this._checkResponse);\n  }\n\n  updateAvatar(data) {\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._getAuthHeaders(),\n      body: JSON.stringify(data),\n    }).then(this._checkResponse);\n  }\n\n  updateProfile(data) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"PATCH\",\n      headers: this._getAuthHeaders(),\n      body: JSON.stringify(data),\n    }).then(this._checkResponse);\n  }\n\n  addLike(cardId) {\n    return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\n      method: \"PUT\",\n      headers: this._getAuthHeaders(),\n    }).then(this._checkResponse);\n  }\n\n  deleteLike(cardId) {\n    return fetch(`${this._baseUrl}/cards/${cardId}/likes`, {\n      method: \"DELETE\",\n      headers: this._getAuthHeaders(),\n    }).then(this._checkResponse);\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this._baseUrl}/cards/${cardId}`, {\n      method: \"DELETE\",\n      headers: this._getAuthHeaders(),\n    }).then(this._checkResponse);\n  }\n  \n  _getAuthHeaders() {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      return this._headers;  // Return the headers without Authorization if no token is found\n    }\n    return {\n      ...this._headers,\n      'Authorization': `Bearer ${token}`,\n    };\n  }\n}\n\nconst base_url =\"http://api.dendriteprojectaround.ignorelist.com\";\n//const base_url =\"http://localhost:8001\";\n\nexport const api = new Api({\n  baseUrl: base_url,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\nexport default api;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}