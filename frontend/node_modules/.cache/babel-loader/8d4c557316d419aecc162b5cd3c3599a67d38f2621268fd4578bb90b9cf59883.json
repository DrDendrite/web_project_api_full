{"ast":null,"code":"import _defineProperty from\"C:/Users/DrDendrite/dev/web_project_api_full/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/DrDendrite/dev/web_project_api_full/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/DrDendrite/dev/web_project_api_full/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import Input from\"./Input\";import InfoTooltip from\"./InfoTooltip\";import{Link,useNavigate,useLocation}from\"react-router-dom\";import*as auth from\"../utils/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Login(_ref){var title=_ref.title,handleLogin=_ref.handleLogin,nameBtn=_ref.nameBtn;var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),credentials=_useState2[0],setCredentials=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),open=_useState6[0],setOpen=_useState6[1];var navigate=useNavigate();var location=useLocation();useEffect(function(){if(location.state===\"success\"){setOpen(false);setError(false);}},[location.state]);var handleChange=function handleChange(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;setCredentials(_objectSpread(_objectSpread({},credentials),{},_defineProperty({},name,value)));};var onLogin=function onLogin(evt){evt.preventDefault();auth.authorize(credentials.password,credentials.email).then(function(responseData){if(responseData&&responseData.token){localStorage.setItem(\"token\",responseData.token);setCredentials({email:\"\",password:\"\"});navigate(\"/\");handleLogin(responseData.token);}else{setError(true);}}).catch(function(err){setError(true);setCredentials({email:\"\",password:\"\"});console.log(err);});};var handleCloseInfo=function handleCloseInfo(){setOpen(true);navigate(\"/signin\",{state:{}});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"authenticate\",id:\"login\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"title\",children:title}),/*#__PURE__*/_jsxs(\"form\",{className:\"authenticate__form\",noValidate:true,onSubmit:onLogin,children:[/*#__PURE__*/_jsx(Input,{className:\"authenticate__input\",type:\"email\",placeholder:\"Correo electrónico\",id:\"email\",maxLength:\"200\",onChange:handleChange}),/*#__PURE__*/_jsx(Input,{className:\"authenticate__input\",type:\"password\",placeholder:\"Contraseña\",id:\"password\",maxLength:\"200\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{className:\"authenticate__btn\",children:nameBtn})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"authenticate__register\",children:[\"\\xBFA\\xFAn no eres miembro?\",/*#__PURE__*/_jsx(Link,{to:\"/signup\",className:\"link\",children:\"Reg\\xEDstrate aqu\\xED\"})]})]}),/*#__PURE__*/_jsx(InfoTooltip,{error:error,onClose:handleCloseInfo,open:open})]});}export default Login;","map":{"version":3,"names":["React","useEffect","useState","Input","InfoTooltip","Link","useNavigate","useLocation","auth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","_ref","title","handleLogin","nameBtn","_useState","email","password","_useState2","_slicedToArray","credentials","setCredentials","_useState3","_useState4","error","setError","_useState5","_useState6","open","setOpen","navigate","location","state","handleChange","evt","_evt$target","target","name","value","_objectSpread","_defineProperty","onLogin","preventDefault","authorize","then","responseData","token","localStorage","setItem","catch","err","console","log","handleCloseInfo","children","className","id","noValidate","onSubmit","type","placeholder","maxLength","onChange","to","onClose"],"sources":["C:/Users/DrDendrite/dev/web_project_api_full/frontend/src/components/Login.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Input from \"./Input\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\nimport * as auth from \"../utils/auth\";\n\nfunction Login({ title, handleLogin, nameBtn }) {\n  const [credentials, setCredentials] = useState({ email: \"\", password: \"\" });\n\n  const [error, setError] = useState(false);\n  const [open, setOpen] = useState(true);\n\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  useEffect(() => {\n    if (location.state === \"success\") {\n      setOpen(false);\n      setError(false);\n    }\n  }, [location.state]);\n\n  const handleChange = (evt) => {\n    const { name, value } = evt.target;\n\n    setCredentials({\n      ...credentials,\n      [name]: value,\n    });\n  };\n\n  const onLogin = (evt) => {\n    evt.preventDefault();\n    auth\n      .authorize(credentials.password, credentials.email)\n      .then((responseData) => {\n        if (responseData && responseData.token) {\n          localStorage.setItem(\"token\", responseData.token);\n          setCredentials({ email: \"\", password: \"\" });\n          navigate(\"/\");\n          handleLogin(responseData.token);\n        } else {\n          setError(true);\n        }\n      })\n      .catch((err) => {\n        setError(true);\n        setCredentials({ email: \"\", password: \"\" });\n        console.log(err);\n      });\n  };\n\n  const handleCloseInfo = () => {\n    setOpen(true);\n    navigate(\"/signin\", { state: {} });\n  };\n\n  return (\n    <>\n      <section className=\"authenticate\" id=\"login\">\n        <h3 className=\"title\">{title}</h3>\n        <form className=\"authenticate__form\" noValidate onSubmit={onLogin}>\n          <Input\n            className={\"authenticate__input\"}\n            type={\"email\"}\n            placeholder={\"Correo electrónico\"}\n            id={\"email\"}\n            maxLength={\"200\"}\n            onChange={handleChange}\n          />\n          <Input\n            className={\"authenticate__input\"}\n            type={\"password\"}\n            placeholder={\"Contraseña\"}\n            id={\"password\"}\n            maxLength={\"200\"}\n            onChange={handleChange}\n          />\n          <button className=\"authenticate__btn\">{nameBtn}</button>\n        </form>\n        <p className=\"authenticate__register\">\n          ¿Aún no eres miembro?\n          <Link to=\"/signup\" className=\"link\">\n            Regístrate aquí\n          </Link>\n        </p>\n      </section>\n\n      <InfoTooltip error={error} onClose={handleCloseInfo} open={open} />\n    </>\n  );\n}\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}